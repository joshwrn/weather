/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";const e=(e,t)=>`https://api.openweathermap.org/data/2.5/weather?q=${e}&units=${t}&appid=9fd048a0fc1fbe1def9f57a580609f63`,t=document.documentElement,r=document.getElementById("input"),n=(document.getElementById("search-button"),document.getElementById("current-icon")),s=document.getElementById("current-temp"),o=document.getElementById("current-high"),a=document.getElementById("current-low"),i=document.getElementById("time"),l=document.getElementById("location"),c=document.getElementById("hourly-forecast");document.querySelectorAll("hourly-cell"),document.getElementById("circle");let d="imperial",u="F";const m=()=>{t.style.setProperty("--before-filters","blur(50px) opacity(50%)"),t.style.setProperty("--spin-animation","")},y=async(n,s)=>{t.style.setProperty("--before-filters","blur(50px) opacity(80%)"),t.style.setProperty("--spin-animation"," spin 1s linear infinite");try{let t=await(async(t="san francisco",r="imperial")=>{const n=await fetch(e(t,r),{mode:"cors"});return await n.json()})(n,s),o=await(async(t="san francisco",r="imperial")=>{const n=await fetch(e(t,r),{mode:"cors"}),s=await n.json(),o=await fetch(((e,t)=>`https://api.openweathermap.org/data/2.5/onecall?lat=${e.lat}&lon=${e.lon}&units=${t}&appid=70d3ce744008d557a872cee31d8820ce`)(s.coord,r),{mode:"cors"});return await o.json()})(n,s);f(t),h(t),g(t),b(o.current.dt),c.innerHTML="",$(o),m(),r.blur(),p(t.weather[0].id,o.current.dt),console.log(t),console.log(o)}catch(e){t.style.setProperty("--search-error","shake 0.2s linear 4"),setTimeout((function(){t.style.setProperty("--search-error","")}),1e3)}},p=(e,t)=>{let r=new Date(1e3*t);n.classList=v(e,r.getHours())},f=e=>{let t=Math.round(e.main.temp);s.innerHTML=`${t}째${u}`},h=e=>{let t=Math.round(e.main.temp_max),r=Math.round(e.main.temp_min);o.innerHTML=`${t}째${u}`,a.innerHTML=`${r}째${u}`},g=e=>{let t=e.name.toUpperCase(),r=e.sys.country;l.innerHTML=`${t}, ${r}`},b=e=>{i.innerHTML=E(e)},E=e=>{let t=new Date(1e3*e),r=w(t.getHours()),n=P(t.getHours());return`${r}:${L(t.getMinutes())}${n}, ${["SUN","MON","TUE","WED","THUR","FRI","SAT"][t.getDay()]}, ${["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"][t.getMonth()]} ${t.getDate()}`},w=e=>e>0&&e<=12?e:e>12?e-12:0===e?"12":void 0,P=e=>0==e||e<12?"AM":e>=12?"PM":void 0,L=e=>e<10?"0"+e:e,v=(e,t)=>{if(t<6||t>18){if(800===e)return"fas fa-moon";if(e>=801&&e<=804)return"fas fa-cloud-moon";if(e>=701&&e<=781)return"fas fa-wind";if(e>=600&&e<=622)return"fas fa-snowflake";if(e>=500&&e<=531)return"fas fa-cloud-moon-rain";if(e>=300&&e<=321)return"fas fa-cloud-rain";if(e>=200&&e<=232)return"fas fa-bolt"}else if(t>=6&&t<=18){if(800===e)return"fas fa-sun";if(e>=801&&e<=804)return"fas fa-cloud-sun";if(e>=701&&e<=781)return"fas fa-wind";if(e>=600&&e<=622)return"fas fa-snowflake";if(e>=500&&e<=531)return"fas fa-cloud-sun-rain";if(e>=300&&e<=321)return"fas fa-cloud-rain";if(e>=200&&e<=232)return"fas fa-bolt"}},$=e=>{for(let t=1;t<=25;t++)M(e.hourly[t].dt,e.hourly[t].temp,e.hourly[t].weather[0].id)},M=(e,t,r)=>{let n=new Date(1e3*e),s=`${w(n.getHours())}${P(n.getHours())}`,o=`${a=t,Math.round(a)}째${u}`;var a;const i=document.createElement("div");i.className="hourly-cell";const l=document.createElement("p");l.classList="hr-time",l.innerHTML=s;const d=document.createElement("i");d.classList=`${v(r,n.getHours())}`;const m=document.createElement("p");m.classList="hr-temp",m.innerHTML=o,i.appendChild(l),i.appendChild(d),i.appendChild(m),c.appendChild(i)},k=document.documentElement,H=document.documentElement,T=(document.getElementById("sidebar-icon"),document.getElementById("sb-close"),document.getElementById("sidebar"));y("san francisco",d),document.addEventListener("click",(e=>{e.target.matches(".units")&&("imperial"===d?(d="metric",u="C",y(l.innerHTML,d)):"metric"===d&&(d="imperial",u="F",y(l.innerHTML,d)))})),document.addEventListener("click",(async e=>{e.target.matches("#search-button")&&(y(r.value,d),r.value="")})),r.addEventListener("keydown",(e=>{13===e.keyCode&&""!==r.value&&(y(r.value,d),r.value="")})),r.addEventListener("focus",(()=>{t.style.setProperty("--before-filters","blur(50px) opacity(80%)"),t.style.setProperty("--spin-animation","spin 1.5s linear infinite")})),r.addEventListener("blur",(()=>{m()})),r.addEventListener("keydown",(e=>{13!==e.keyCode&&(t.style.setProperty("--before-transition","animation 1s, filter .2s"),t.style.setProperty("--before-filters","blur(65px) opacity(70%)"))})),r.addEventListener("keyup",(e=>{13!==e.keyCode&&(t.style.setProperty("--before-transition","animation 1s, filter 1s"),t.style.setProperty("--before-filters","blur(50px) opacity(80%)"))})),(()=>{let e="closed";document.addEventListener("click",(t=>{t.target.matches("#sidebar-icon")&&(T.style.setProperty("visibility","visible"),T.style.setProperty("width","250px"),H.style.setProperty("--sidebar-items","translate(0px)"),setTimeout((function(){e="open"}),2))})),document.addEventListener("click",(t=>{t.target.matches("#sb-close")&&(H.style.setProperty("--sidebar-items","translate(-300px)"),T.style.setProperty("visibility","hidden"),T.style.setProperty("width","0px"),e="closed")})),document.addEventListener("click",(t=>{"open"===e&&"sidebar"!==t.target.id&&"sb-main"!==t.target.id&&(H.style.setProperty("--sidebar-items","translate(-300px)"),T.style.setProperty("visibility","hidden"),T.style.setProperty("width","0px"),e="closed")})),(()=>{let e="dark";document.addEventListener("click",(t=>{t.target.matches(".theme")&&("dark"===e?(k.style.setProperty("--theme-color-one","white"),k.style.setProperty("--theme-color-two","black"),k.style.setProperty("--theme-color-four","rgba(0, 0, 0, 0.5)"),e="light"):"light"===e&&(k.style.setProperty("--theme-color-one","black"),k.style.setProperty("--theme-color-two","white"),k.style.setProperty("--theme-color-four","rgba(255, 255, 255, 0.5)"),e="dark"))}))})()})()})();