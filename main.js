/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";const e=(e,t)=>`https://api.openweathermap.org/data/2.5/weather?q=${e}&units=${t}&appid=9fd048a0fc1fbe1def9f57a580609f63`,t=document.documentElement,n=document.getElementById("input"),r=(document.getElementById("search-button"),document.getElementById("current-icon")),i=document.getElementById("current-temp"),s=document.getElementById("current-high"),a=document.getElementById("current-low"),o=document.getElementById("time"),l=document.getElementById("location"),d=document.getElementById("hourly-forecast");document.querySelectorAll("hourly-cell"),document.getElementById("circle");let c="imperial",u="F";const m=()=>{t.style.setProperty("--before-filters","blur(50px) opacity(50%)"),t.style.setProperty("--spin-animation","")},p=async(r,i)=>{t.style.setProperty("--before-filters","blur(50px) opacity(80%)"),t.style.setProperty("--spin-animation"," spin 1s linear infinite");let s=await(async(t="san francisco",n="imperial")=>{const r=await fetch(e(t,n),{mode:"cors"});return await r.json()})(r,i),a=await(async(t="san francisco",n="imperial")=>{const r=await fetch(e(t,n),{mode:"cors"}),i=await r.json(),s=await fetch(((e,t)=>`https://api.openweathermap.org/data/2.5/onecall?lat=${e.lat}&lon=${e.lon}&units=${t}&appid=70d3ce744008d557a872cee31d8820ce`)(i.coord,n),{mode:"cors"});return await s.json()})(r,i);f(s),h(s),g(s),E(a.current.dt),d.innerHTML="",P(a),m(),n.blur(),y(s.weather[0].id,a.current.dt),console.log(s),console.log(a)},y=(e,t)=>{let n=new Date(1e3*t);r.classList=v(e,n.getHours())},f=e=>{let t=Math.round(e.main.temp);i.innerHTML=`${t}째${u}`},h=e=>{let t=Math.round(e.main.temp_max),n=Math.round(e.main.temp_min);s.innerHTML=`${t}째${u}`,a.innerHTML=`${n}째${u}`},g=e=>{let t=e.name.toUpperCase(),n=e.sys.country;l.innerHTML=`${t}, ${n}`},E=e=>{o.innerHTML=b(e)},b=e=>{let t=new Date(1e3*e),n=w(t.getHours()),r=L(t.getHours());return`${n}:${$(t.getMinutes())}${r}, ${["SUN","MON","TUE","WED","THUR","FRI","SAT"][t.getDay()]}, ${["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"][t.getMonth()]} ${t.getDate()}`},w=e=>e>0&&e<=12?e:e>12?e-12:0===e?"12":void 0,L=e=>0==e||e<12?"AM":e>=12?"PM":void 0,$=e=>e<10?"0"+e:e,v=(e,t)=>{if(t<6||t>18){if(800===e)return"fas fa-moon";if(e>=801&&e<=804)return"fas fa-cloud-moon";if(e>=701&&e<=781)return"fas fa-wind";if(e>=600&&e<=622)return"fas fa-snowflake";if(e>=500&&e<=531)return"fas fa-cloud-moon-rain";if(e>=300&&e<=321)return"fas fa-cloud-rain";if(e>=200&&e<=232)return"fas fa-bolt"}else if(t>=6&&t<=18){if(800===e)return"fas fa-sun";if(e>=801&&e<=804)return"fas fa-cloud-sun";if(e>=701&&e<=781)return"fas fa-wind";if(e>=600&&e<=622)return"fas fa-snowflake";if(e>=500&&e<=531)return"fas fa-cloud-sun-rain";if(e>=300&&e<=321)return"fas fa-cloud-rain";if(e>=200&&e<=232)return"fas fa-bolt"}},P=e=>{for(let t=1;t<=25;t++)M(e.hourly[t].dt,e.hourly[t].temp,e.hourly[t].weather[0].id)},M=(e,t,n)=>{let r=new Date(1e3*e),i=`${w(r.getHours())}${L(r.getHours())}`,s=`${a=t,Math.round(a)}째${u}`;var a;const o=document.createElement("div");o.className="hourly-cell";const l=document.createElement("p");l.classList="hr-time",l.innerHTML=i;const c=document.createElement("i");c.classList=`${v(n,r.getHours())}`;const m=document.createElement("p");m.classList="hr-temp",m.innerHTML=s,o.appendChild(l),o.appendChild(c),o.appendChild(m),d.appendChild(o)},H=document.documentElement,T=(document.getElementById("sidebar-icon"),document.getElementById("sb-close"),document.getElementById("sidebar"));p("san francisco",c),document.addEventListener("click",(e=>{e.target.matches(".units")&&("imperial"===c?(c="metric",u="C",p(l.innerHTML,c),console.log(c)):"metric"===c&&(c="imperial",u="F",p(l.innerHTML,c),console.log(c)))})),document.addEventListener("click",(async e=>{e.target.matches("#search-button")&&(p(n.value,c),n.value="")})),n.addEventListener("keydown",(e=>{13===e.keyCode&&""!==n.value&&(p(n.value,c),n.value="")})),n.addEventListener("focus",(()=>{t.style.setProperty("--before-filters","blur(50px) opacity(80%)"),t.style.setProperty("--spin-animation","spin 1.5s linear infinite")})),n.addEventListener("blur",(()=>{m()})),n.addEventListener("keydown",(e=>{13!==e.keyCode&&(t.style.setProperty("--before-transition","animation 1s, filter .2s"),t.style.setProperty("--before-filters","blur(65px) opacity(70%)"))})),n.addEventListener("keyup",(e=>{13!==e.keyCode&&(t.style.setProperty("--before-transition","animation 1s, filter 1s"),t.style.setProperty("--before-filters","blur(50px) opacity(80%)"))})),(()=>{let e="closed";document.addEventListener("click",(t=>{t.target.matches("#sidebar-icon")&&(T.style.setProperty("visibility","visible"),T.style.setProperty("width","250px"),H.style.setProperty("--sidebar-items","translate(0px)"),setTimeout((function(){e="open"}),2))})),document.addEventListener("click",(t=>{t.target.matches("#sb-close")&&(H.style.setProperty("--sidebar-items","translate(-300px)"),T.style.setProperty("visibility","hidden"),T.style.setProperty("width","0px"),e="closed")})),document.addEventListener("click",(t=>{"open"===e&&"sidebar"!==t.target.id&&"sb-main"!==t.target.id&&(H.style.setProperty("--sidebar-items","translate(-300px)"),T.style.setProperty("visibility","hidden"),T.style.setProperty("width","0px"),e="closed")}))})()})();